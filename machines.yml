base:
    machines:
        - base-centos-7
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/stuff/install_cowsay.sh"
            - path: "provision/repos/cp_all.sh"
            - path: "provision/install_python.sh"
            - path: "provision/install_cool.sh"
            - path: "provision/install_htop.sh"

magi:
    machines:
        - Melchor
        - Gaspar
        - Baltasar
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/repos/cp_all.sh"
            - path: "provision/copy_hosts.sh"

            - path: "provision/pacemaker/install_pacemaker.sh"
              args: "{name_owner} {ip_owner}"

nginx:
    machines:
        - Ikaros
        - Astraea
        - Caos
        - Nymph
    extra_hosts:
        - "kibana"
        - "waifu"
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/repos/cp_all.sh"
            - path: "provision/copy_hosts.sh"
            - path: "provision/nginx/install_nginx.sh"
            - path: "provision/nginx/start_nginx.sh"

elasticsearch_master:
    machines:
        - Misuzu
        - Pitou
        - Sakura
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/install_python.sh"
            - path: "provision/install_htop.sh"
            - path: "provision/install_cool.sh"
            - path: "provision/copy_hosts.sh"
            - path: "provision/stuff/install_java.sh"
            - path: "provision/elasticsearch/install_elasticsearch.sh"
            - path: "provision/elasticsearch/install_kibana.sh"
            - path: "provision/elasticsearch/start_elasticsearch.sh"
              args: "{name}"

            - path: "provision/elasticsearch/start_kibana.sh"
            - path: "provision/elasticsearch/install_dashboards.sh"

elasticsearch_data:
    machines:
        - Rem
        - Rei
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/install_python.sh"
            - path: "provision/install_htop.sh"
            - path: "provision/install_cool.sh"
            - path: "provision/copy_hosts.sh"
            - path: "provision/stuff/install_java.sh"
            - path: "provision/elasticsearch/install_elasticsearch.sh"
            - path: "provision/elasticsearch/install_kibana.sh"
            - path: "provision/elasticsearch/start_elasticsearch.sh"
              args: "{name}"

            - path: "provision/elasticsearch/start_kibana.sh"
            - path: "provision/elasticsearch/install_dashboards.sh"

elasticsearch_query:
    machines:
        - Ren
        - Sonico
        - Tifa
    config:
        ram: 1024
        cpus: 1
        provisions:
            - path: "provision/repos/cp_all.sh"
            - path: "provision/copy_hosts.sh"
            - path: "provision/stuff/install_java.sh"
            - path: "provision/elasticsearch/install_elasticsearch.sh"
            - path: "provision/elasticsearch/install_kibana.sh"
            - path: "provision/elasticsearch/start_elasticsearch.sh"
              args: "{name}"

            - path: "provision/elasticsearch/start_kibana.sh"
            - path: "provision/elasticsearch/install_dashboards.sh"

logstash-layer-in:
    machines:
        - Ai
        - Nanami
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/repos/cp_all.sh"
            - path: "provision/copy_hosts.sh"
            - path: "provision/stuff/install_java.sh"
            - path: "provision/logstash/install_logstash.sh"
            - path: "provision/logstash/start_logstash.sh"

logstash-layer-out:
    machines:
        - Touko
        - Yuu
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/repos/cp_all.sh"
            - path: "provision/copy_hosts.sh"
            - path: "provision/stuff/install_java.sh"
            - path: "provision/logstash/install_logstash.sh"
            - path: "provision/logstash/start_logstash.sh"

django:
    machines:
        - Shiro
        - Victorique
        - Shionji
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/repos/cp_all.sh"
            - path: "provision/copy_hosts.sh"

scrapy:
    machines:
        - Potato
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/repos/cp_all.sh"
            - path: "provision/copy_hosts.sh"

rabbitmq:
    machines:
        - Fumika
        - chiaki
    config:
        ram: 512
        cpus: 1
        provisions:
            - path: "provision/repos/cp_all.sh"
            - path: "provision/copy_hosts.sh"
            - path: "provision/stuff/install_erlang.sh"
            - path: "provision/stuff/install_elixir.sh"
            - path: "provision/pacemaker/install_pacemaker.sh"
              args: "{name_owner}"
            - path: "provision/rabbitmq/install_rabbitmq.sh"
